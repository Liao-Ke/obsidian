---
æ¥è‡ª: "https://tofuwine.github.io/posts/610b75f5/"
æ”¶è—æ—¶é—´: 2025å¹´10æœˆ03æ—¥ äº” 12:35:25
tags:
  - "ç½‘é¡µæ”¶è—"
---
> [!note] æ‘˜è¦
> PaperMod é›†æˆ Giscus è¯„è®º | Tofuwine's Blog
> 
> æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•å°† Giscus è¯„è®ºç³»ç»Ÿé›†æˆåˆ° Hugo å’Œ PaperMod ä¸»é¢˜çš„ç½‘ç«™ä¸­ï¼ŒåŒ…æ‹¬é…ç½®æ­¥éª¤ã€ä¸»é¢˜åˆ‡æ¢å’Œæ·»åŠ è¯„è®ºæ ‡é¢˜ç­‰ã€‚æ–‡ç« è¿˜æä¾›äº†å®˜æ–¹æ–‡æ¡£å’Œæ•™ç¨‹å‚è€ƒé“¾æ¥ï¼Œä»¥å¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨ Giscus è¯„è®ºç³»ç»Ÿã€‚


æœ¬æ–‡æœ€åæ›´æ–°äº 1 å¹´å‰ ï¼Œæ–‡ä¸­ä¿¡æ¯å¯èƒ½å·²ç»è¿‡æ—¶ã€‚å¦‚æœ‰é—®é¢˜è¯·åœ¨è¯„è®ºåŒºç•™è¨€ã€‚

## Gisucs

> å®˜ç½‘ï¼š [giscus.app](https://giscus.app/zh-CN)

åˆ©ç”¨ [GitHub Discussions](https://docs.github.com/en/discussions) å®ç°çš„è¯„è®ºç³»ç»Ÿï¼Œè®©è®¿å®¢å€ŸåŠ© GitHub åœ¨ä½ çš„ç½‘ç«™ä¸Šç•™ä¸‹è¯„è®ºå’Œååº”å§ï¼æœ¬é¡¹ç›®æ·±å— utterances çš„å¯å‘ã€‚

- [å¼€æº](https://github.com/giscus/giscus) ã€‚ğŸŒ
- æ— è·Ÿè¸ªï¼Œæ— å¹¿å‘Šï¼Œæ°¸ä¹…å…è´¹ã€‚ğŸ“¡ ğŸš«
- æ— éœ€æ•°æ®åº“ã€‚æ‰€æœ‰æ•°æ®å‡å‚¨å­˜åœ¨ GitHub Discussions ä¸­ã€‚:octocat:
- æ”¯æŒ [è‡ªå®šä¹‰ä¸»é¢˜](https://github.com/giscus/giscus/blob/main/ADVANCED-USAGE.md#data-theme) ï¼ğŸŒ—
- æ”¯æŒ [å¤šç§è¯­è¨€](https://github.com/giscus/giscus/blob/main/CONTRIBUTING.md#adding-localizations) ã€‚ğŸŒ
- [é«˜å¯é…ç½®æ€§](https://github.com/giscus/giscus/blob/main/ADVANCED-USAGE.md) ã€‚ğŸ”§
- è‡ªåŠ¨ä» GitHub æ‹‰å–æ–°è¯„è®ºä¸ç¼–è¾‘ã€‚ğŸ”ƒ
- [å¯è‡ªå»ºæœåŠ¡](https://github.com/giscus/giscus/blob/main/SELF-HOSTING.md) ï¼ğŸ¤³

## æ•™ç¨‹å‚è€ƒ

æœ¬ç«™é›†æˆæ–¹å¼å‚è€ƒä»¥ä¸‹åšæ–‡ï¼Œä¸ºå°Šé‡åŸåˆ›ä½œè€…ï¼Œæœ¬æ–‡ä¸å†èµ˜è¿°ï¼Œè¯·ç§»æ­¥åˆ°å…¶ç«™ç‚¹æŸ¥çœ‹ï¼š

æ•™ç¨‹å‚è€ƒ

[Hugo åšå®¢å¼•å…¥ Giscus è¯„è®ºç³»ç»Ÿ â€”â€” æ„ç¦è¡Œ](https://www.lixueduan.com/posts/blog/02-add-giscus-comment/)

ä½ ä¹Ÿå¯ä»¥å‚è€ƒ [å®˜æ–¹æ–‡æ¡£](https://giscus.app/zh-CN) ã€‚

## ä¸»é¢˜åˆ‡æ¢

æŒ‰ä¸Šè¿°æ•™ç¨‹é›†æˆäº† Giscus è¯„è®ºç³»ç»Ÿï¼Œä½†è¯„è®ºåŒºä¸»é¢˜ä¸èƒ½åŠ¨æ€å˜æ›´ã€‚

æºç å‚è€ƒ

[issues#1200 â€”â€” giscus](https://github.com/giscus/giscus/issues/1200)

å¦‚éœ€è¯„è®ºåŒºéšç•Œé¢ä¸»é¢˜å˜æ›´ï¼Œè¯·æŒ‰å¦‚ä¸‹æ–¹å¼ä¿®æ”¹é…ç½®ï¼š

### Hugo é…ç½®

å°† giscus å±æ€§å­—æ®µæå–åˆ° Hugo é…ç½®ä¸­ï¼š

```yaml

params:

  giscus:

    repo: "{{ YOUR REPOSITORY }}"

    repoId: "{{ YOUR REPO ID }}"

    category: "Announcements"

    categoryId: "{{ YOUR CATEGORY ID }}"

    mapping: "pathname"

    strict: "0"

    reactionsEnabled: "1"

    emitMetadata: "0"

    inputPosition: "top"

    lightTheme: "light"

    darkTheme: "dark"

    lang: "zh-CN"
```

### è¯„è®ºç•Œé¢

å˜æ›´ `comments.html` å†…å®¹å¦‚ä¸‹:

```html

<script>

    const getStoredTheme = () => localStorage.getItem("pref-theme") === "dark" ? "{{ .Site.Params.giscus.darkTheme }}" : "{{ .Site.Params.giscus.lightTheme }}";

    const setGiscusTheme = () => {

        const sendMessage = (message) => {

            const iframe = document.querySelector('iframe.giscus-frame');

            if (iframe) {

                iframe.contentWindow.postMessage({giscus: message}, 'https://giscus.app');

            }

        }

        sendMessage({setConfig: {theme: getStoredTheme()}})

    }

    document.addEventListener("DOMContentLoaded", () => {

        const giscusAttributes = {

            "src": "https://giscus.app/client.js",

            "data-repo": "{{ .Site.Params.giscus.repo }}",

            "data-repo-id": "{{ .Site.Params.giscus.repoId }}",

            "data-category": "{{ .Site.Params.giscus.category }}",

            "data-category-id": "{{ .Site.Params.giscus.categoryId }}",

            "data-mapping": "{{ .Site.Params.giscus.mapping | default "pathname" }}",

            "data-strict": "{{ .Site.Params.giscus.strict | default "0" }}",

            "data-reactions-enabled": "{{ .Site.Params.giscus.reactionsEnabled | default "1" }}",

            "data-emit-metadata": "{{ .Site.Params.giscus.emitMetadata | default "0" }}",

            "data-input-position": "{{ .Site.Params.giscus.inputPosition | default "bottom" }}",

            "data-theme": getStoredTheme(),

            "data-lang": "{{ .Site.Params.giscus.lang | default "en" }}",

            "data-loading": "lazy",

            "crossorigin": "anonymous",

            "async": "",

        };

        // åŠ¨æ€åˆ›å»º giscus script

        const giscusScript = document.createElement("script");

        Object.entries(giscusAttributes).forEach(

                ([key, value]) => giscusScript.setAttribute(key, value));

        document.querySelector("#tw-comment").appendChild(giscusScript);

        // é¡µé¢ä¸»é¢˜å˜æ›´åï¼Œå˜æ›´ giscus ä¸»é¢˜

        const themeSwitcher = document.querySelector("#theme-toggle");

        if (themeSwitcher) {

            themeSwitcher.addEventListener("click", setGiscusTheme);

        }

        const themeFloatSwitcher = document.querySelector("#theme-toggle-float");

        if (themeFloatSwitcher) {

            themeFloatSwitcher.addEventListener("click", setGiscusTheme);

        }

    });

</script>
```

## è¯„è®ºæ ‡é¢˜ & å­æ ‡é¢˜

å¢åŠ è¯„è®ºåŒºæ ‡é¢˜ & å­æ ‡é¢˜ï¼Œå¼•å¯¼ç”¨æˆ·è¿›è¡Œè¯„è®ºã€‚

ä¿®æ”¹è¯„è®ºç•Œé¢ï¼Œåœ¨æœ€ä¸Šé¢æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
```html
<!-- layouts/partials/comments.html -->
<div class="comments-title" id="tw-comment-title">
    <p class="x-comments-title">{{- .Param "discussionTitle" }}</p>
    <p style="font-size: 1rem">{{- .Param "discussionSubtitle" }} </p>
</div>
```

æ·»åŠ æ ·å¼ï¼š
```css
/* assets/css/extended/comment.css */
/* giscus è¯„è®ºç»„ä»¶ */
.comments-title {
    margin-top: 2rem;
    margin-bottom: 2rem;
    display: block;
    text-align: center;
}

.x-comments-title {
    display: block;
    font-size: 1.25em;
    font-weight: 700;
    padding: 1.5rem 0 .5rem;
}
```
### ä½¿ç”¨æ–¹å¼

1. ä½ å¯ä»¥åœ¨ Hugo é…ç½®ä¸­é…ç½®å…¨å±€å€¼ï¼š

```
params:

  # è¯„è®ºåŒº

  discussionTitle: æ¬¢è¿æ¥åˆ°è¯„è®ºåŒº

  discussionSubtitle: æ„Ÿè°¢æ‚¨çš„è€å¿ƒé˜…è¯»ï¼æ¥é€‰ä¸ªè¡¨æƒ…ï¼Œæˆ–è€…ç•™ä¸ªè¯„è®ºå§ï¼
```

1. ä¹Ÿå¯åœ¨æ–‡ç«  `frontmatter` ä¸­æ·»åŠ ï¼š(ä»¥æœ¬ç«™ [å‹é“¾](https://tofuwine.github.io/friend) ä¸ºä¾‹)

```
discussionTitle: ğŸ‘‡ ç”³è¯·å‹é“¾ ğŸ‘‡

discussionSubtitle: åœ¨ä¸‹æ–¹è¯„è®ºåŒºç•™ä¸‹ä½ çš„é“¾æ¥å§!
```